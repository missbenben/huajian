<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <title>企业信息</title>
    <link href="../lib/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/HJcommon.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/login.css">
    <link rel="stylesheet" href="../css/popUp.css">
    <link rel="stylesheet" href="../css/enterpriseInformation.css">
    <!--  注意  要在http形式下打开 页面 才能正常使用下面两个文件-->
    <!--[if lt IE 9]>
    <script src="../lib/html5shiv/html5shiv.min.js"></script>
    <script src="../lib/respond/respond.js"></script>
    <![endif]-->
    <script src="../lib/jquery/jquery.js"></script>
    <script src="../lib/bootstrap/js/bootstrap.js"></script>
    <script src="../js/popUp.js"></script>
    <script src="../js/selectCommon.js"></script>
    <script src="../js/loginCommon.js"></script>
</head>
<body>
<!--头部-->
<div class="HJ-header">
    <div class="HJ-header-tabs clearfix">
        <div class="project-classification pull-left clearfix">
            <div class="name pull-left">数字化审图平台</div>
            <ul class="pull-left">
                <li class="manage-project"><a href="enterpriseAdminPM.html">项目管理</a></li>
                <li class="reviewed-project"><a href="enterpriseAdminMember.html">成员管理</a></li>
                <li class="review-project"><a href="enterpriseAdminEnterInfo.html">企业信息</a></li>
            </ul>
        </div>
        <div class="personal-center pull-right">
            <ul>
                <li class="user">
                    <div class="name">
                        CCCC <i class="iconfont icon-arrLeft-fill"></i>
                    </div>
                    <div class="user-dropDown-box">
                        <div class="company">文思海辉有限公司</div>
                        <div class="personal-information clearfix">
                            个人信息
                            <span class="pull-right"><a href="#">编辑</a></span>
                        </div>
                        <div class="exit">
                            <div class="exit-logo">
                                <img src="../image/exit.png" alt="">退出
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="main-box">
    <div class="enterpriseInformation-content">
        <div class="information-box">
            <div class="enterprise-title clearfix">
                <div class="pull-left title">企业信息</div>
            </div>
            <div class="enterprice-information clearfix">
                <table class="pull-left enterprice-information-table">
                    <tbody>
                    <tr>
                        <td class="common">企业组织机构代码：</td>
                        <td>dgsisjz</td>
                    </tr>
                    <tr>
                        <td class="common">专业类型：</td>
                        <td>设计单位</td>
                    </tr>
                    <tr>
                        <td class="common">企业名称：</td>
                        <td>文思海辉技术有限公司</td>
                    </tr>
                    <tr>
                        <td class="common">企业电话：</td>
                        <td>021-876665555</td>
                    </tr>
                    <tr>
                        <td class="common">企业地址：</td>
                        <td>上海市徐汇区徐家汇街道XXXXXXXXX海市徐汇区徐家汇街道XXXXX</td>
                    </tr>
                    <tr>
                        <td class="common">专业执照注册号：</td>
                        <td>65874938021212</td>
                    </tr>
                    </tbody>
                </table>
                <div class="business-license pull-left">
                    <div class="title">营业执照扫描件：</div>
                    <img src="" alt="">
                </div>
            </div>

        </div>
    </div>
    <div class="modify-information">修改信息</div>
</div>
<div class="wrap"></div>
<div class="popUp">
    <!--修改企业信息弹窗-->
    <div class="common-popUp modify-enterprise-information">
        <div class="addProfession-popUp-con">
        <img src="../image/ICON_GUANBI.png" alt="" class="close-icon">
        <div class="title">修改企业信息</div>
        <div class="choose-person">
            <div class="form-group">
                <label for="enterprise-organization-code" class="prompt">企业组织机构代码</label>
                <div class="form-controls">
                    <input id="enterprise-organization-code" onblur="checkOrganizationCode()" type="text" class="control" placeholder="请输入企业组织机构代码">
                    <div class="error-reminder"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="enterprise-name" class="prompt">企业名称</label>
                <div class="form-controls">
                    <input id="enterprise-name" onblur="checkEnterpriseName()" type="text" class="control" placeholder="请输入企业名称">
                    <div class="error-reminder"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="enterprise-address" class="prompt">企业地址</label>
                <div class="form-controls">
                    <input id="enterprise-address" onblur="checkEnterpriseAddress()" type="text" class="control" placeholder="请输入企业地址">
                    <div class="error-reminder"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="enterprise-telephone" class="prompt">企业电话</label>
                <div class="form-controls">
                    <input id="enterprise-telephone" onblur="checkEnterpriseTelephone()" type="text" class="control" placeholder="请输入企业电话">
                    <div class="error-reminder"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="enterprise-telephone" class="prompt">营业执照注册号</label>
                <div class="form-controls">
                    <input id="enterprise-licenumber" onblur="checkLicenseNumber()" type="text" class="control" placeholder="请填写营业执照注册号">
                    <div class="error-reminder"></div>
                </div>
            </div>
        </div>
        <div class="business-license">营业执照扫描：</div>
        <div class="business-license-box">
            <div class="upload-license">
                <!-- <div class="upload-picture-wrapper">
                     <img src="" alt="">
                     <span class="modify">修改</span>
                 </div>-->
                <label for="file1" class="add-picture">
                    <img src="../image/upload.png" alt="" class="add-icon">
                </label>
                <input type="file" id="file1" class="upload-file">
                <div class="loading">
                    <img src="../image/loading.gif" height="32" width="32"/>
                </div>
            </div>
        </div>
        <div class="confirm-box">
            <div class="confirm-btn">确认</div>
            <div class="cancle-btn">取消</div>
        </div>
    </div>
    </div>
</div>
<script type="text/javascript">
    function checkOrganizationCode() {
        var enterpriseOrganizationCode = $("#enterprise-organization-code").val();
        if((!regs.organizationCode.test(enterpriseOrganizationCode)) && (enterpriseOrganizationCode)) {
            errPromotShow( $("#enterprise-organization-code"),"企业组织机构代码应为9位数字");
            return false;
        }
    }
    function checkEnterpriseName() {
        var enterpriseName = $("#enterprise-name").val();
        if((!regs.enterpriseName(enterpriseName)) && (enterpriseName)) {
            errPromotShow( $("#enterprise-name"),"企业名称应为25字以内");
            return false;
        }
    }
    function checkEnterpriseAddress() {
        var enterpriseAddress = $("#enterprise-address").val();
        if((!regs.address(enterpriseAddress)) && (enterpriseAddress)) {
            errPromotShow( $("#enterprise-address"),"企业地址应为50位以内");
            return false;
        }
    }
    function checkEnterpriseTelephone() {
        var enterpriseTelephone = $("#enterprise-telephone").val();
        if((!regs.telephone.test(enterpriseTelephone)) && (enterpriseTelephone)) {
            errPromotShow( $("#enterprise-telephone"),"请填写有效的企业电话(例如区号-电话号码)");
            return false;
        }
    }
    function checkLicenseNumber() {
        var licenseNumber = $("#enterprise-licenumber").val();
        if((!regs.licenseNumber.test(licenseNumber)) && (licenseNumber)) {
            errPromotShow( $("#enterprise-licenumber"),"营业执照注册号应为15位数字");
            return false;
        }
    }
    $(".form-controls .control").on("focus", function() {
        removeErr($(this));
    });
</script>
<script type="text/javascript">
    $(function() {
        popUp(".modify-information",".modify-enterprise-information");

        var pictureGroups = {};
        $('.upload-license').on('change', '.upload-file', function () {
            var file = $(this).get(0);
            var files = file.files;
            var addPic = $(this).siblings('.add-picture');
            var parent = $(this).parent();
            var id = $(this).attr('id');
            if (!pictureGroups[id]) pictureGroups[id] = [];
            var len = pictureGroups[id].length;
            for (var i in files) {
                if (!isNaN(i)) {
                    pictureGroups[id].push({
                        index: len,
                        file: files[i]
                    });
                    len++;
                }
            }
            if (pictureGroups[id].length >= 1) addPic.remove();
            pictureGroups[id].forEach(function (item) {
                reads(item.file, item.index, parent, id);
            })
            $(this).remove();
            /* var html = '\
             <input type="file" id="file1" class="upload-file">\
             <div class="loading">\
             <img src="../image/loading.gif" height="32" width="32"/>\
             </div>';
             $(".upload-license").html(html);*/

            $('.loading').show();
            //执行上传操作
        });
        function reads(fil, index, parent, id) {
            var reader = new FileReader();
            reader.readAsDataURL(fil);
            reader.onload = function () {
                if ($('.upload-picture[data-index="' + index + '"]').length > 0) return;
                parent.prepend('<div class="upload-picture-wrapper"><img class="upload-picture" src="' + this.result + '" data-id="' + id + '" data-index="' + index + '"/> <span class="modify">修改</span></div>');
            };
        }
        //重新上传
        $(".business-license-box").on("click",".modify", function() {
            $(".upload-picture-wrapper").remove();
            var html = '\
                <label for="file1" class="add-picture"><img src="../image/upload.png" alt="" class="add-icon"></label>\
                <input type="file" id="file1" class="upload-file">\
                <div class="loading"><img src="../image/loading.gif" height="32" width="32"/></div>';
            $(".upload-license").append(html);
            pictureGroups={};
        });

        //确认
        $(".modify-enterprise-information .confirm-btn").click(function() {
            var enterpriseOrganizationCode = $("#enterprise-organization-code").val();
            var enterpriseName = $("#enterprise-name").val();
            var enterpriseAddress = $("#enterprise-address").val();
            var enterpriseTelephone = $("#enterprise-telephone").val();
            var licenseNumber = $("#enterprise-licenumber").val();
            if(!enterpriseOrganizationCode) {
                errPromotShow( $("#enterprise-organization-code"),"企业组织机构代码不能为空");
                return false;
            }
            if(!regs.organizationCode.test(enterpriseOrganizationCode)) {
                errPromotShow( $("#enterprise-organization-code"),"企业组织机构代码应为9位数字");
                return false;
            }
            if(!enterpriseName) {
                errPromotShow( $("#enterprise-name"),"企业名称不能为空");
                return false;
            }
            if(!regs.enterpriseName(enterpriseName)) {
                errPromotShow( $("#enterprise-name"),"企业名称应为25字以内");
                return false;
            }
            if(!enterpriseAddress) {
                errPromotShow( $("#enterprise-address"),"企业地址不能为空");
                return false;
            }
            if(!regs.address(enterpriseAddress)) {
                errPromotShow( $("#enterprise-address"),"企业地址应为50位以内");
                return false;
            }
            if(!enterpriseTelephone) {
                errPromotShow( $("#enterprise-telephone"),"企业电话不能为空");
                return false;
            }
            if(!regs.telephone.test(enterpriseTelephone)) {
                errPromotShow( $("#enterprise-telephone"),"请填写有效的企业电话(例如区号-电话号码)");
                return false;
            }
            if(!licenseNumber) {
                errPromotShow( $("#enterprise-licenumber"),"营业执照注册号不能为空");
                return false;
            }
            if(!regs.licenseNumber.test(licenseNumber)) {
                errPromotShow( $("#enterprise-licenumber"),"营业执照注册号应为15位数字");
                return false;
            }
        })

    })
</script>


</body>
</html>